<script lang="ts" setup>
const { websiteBaseUrl } = useRuntimeConfig().public;

useSeoMeta({
  title: '–ì–æ–ª–æ–≤–Ω–∞',
  description:
    '–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–∑–∞–±—É—Ç–Ω—ñ –≤—ñ–¥—á—É—Ç—Ç—è –¥–ª—è —Å–≤–æ—î—ó –¥—Ä—É–≥–æ—ó –ø–æ–ª–æ–≤–∏–Ω–∫–∏, –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É',
  ogTitle: '%s',
  ogDescription:
    '–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–∑–∞–±—É—Ç–Ω—ñ –≤—ñ–¥—á—É—Ç—Ç—è –¥–ª—è —Å–≤–æ—î—ó –¥—Ä—É–≥–æ—ó –ø–æ–ª–æ–≤–∏–Ω–∫–∏, –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É',
  ogUrl: `${websiteBaseUrl}/`,
  ogType: 'website',
});

defineOgImageComponent('NuxtSeo', {
  title: '–ì–æ–ª–æ–≤–Ω–∞',
  description:
    '–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–∑–∞–±—É—Ç–Ω—ñ –≤—ñ–¥—á—É—Ç—Ç—è –¥–ª—è —Å–≤–æ—î—ó –¥—Ä—É–≥–æ—ó –ø–æ–ª–æ–≤–∏–Ω–∫–∏, –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É',
  theme: '#e9110b',
  colorMode: 'light',
});

const { handleRedirect } = useValentineRedirect();
const { count, error, isPending } = useValentinesCount();

const valentineStore = useValentineStore();
const stepperStore = useStepperStore();

const howItWorksSection = ref<HTMLElement | null>(null);

const scrollToSection = (event: Event) => {
  event.preventDefault();
  howItWorksSection.value?.scrollIntoView({ behavior: 'smooth' });
};

onMounted(() => {
  valentineStore.reset();
  stepperStore.reset();
});
</script>

<template>
  <div class="flex flex-col w-full mx-auto min-h-dvh">
    <div
      class="w-full mt-10"
      :style="{
        background:
          'radial-gradient(94.39% 76.37% at 50% 134.15%, #E11C47 0%, #FFF 100%)',
      }"
    >
      <div
        class="flex flex-col w-full min-h-dvh items-center justify-center gap-6 container"
      >
        <p class="font-inter text-2xl text-center leading-relaxed">
          –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–∑–∞–±—É—Ç–Ω—ñ –≤—ñ–¥—á—É—Ç—Ç—è –¥–ª—è —Å–≤–æ—î—ó –¥—Ä—É–≥–æ—ó –ø–æ–ª–æ–≤–∏–Ω–∫–∏ <br />
          –í—ñ–¥–ø—Ä–∞–≤—Ç–µ
          <em
            class="font-excali inline-block whitespace-nowrap bg-primary/30 selection:bg-transparent p-2 rounded-md"
          >
            –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É
          </em>
        </p>

        <div class="flex gap-3">
          <Button class="h-12 text-base" @click="handleRedirect()">
            <Icon class="size-6" name="lucide:plus" />
            –°—Ç–≤–æ—Ä–∏—Ç–∏
          </Button>
          <Button
            class="h-12 text-base"
            variant="outline"
            @click="scrollToSection"
          >
            –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?
          </Button>
        </div>

        <div
          class="flex items-center justify-between border-2 border-dashed border-pink-300 rounded-xl p-8 bg-pink-50/30 backdrop-blur-sm shadow-inner max-md:flex-col max-md:text-center"
        >
          <p
            v-if="isPending"
            class="font-excali text-xl text-red-500 animate-pulse"
          >
            –†–∞—Ö—É—î–º–æ –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∏... üíå
          </p>
          <p v-else-if="error" class="font-excali text-xl text-red-500">
            –°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –¥–∞–Ω–∏—Ö üò¢
          </p>
          <p v-else class="font-excali text-xl text-red-500">
            {{ count }} –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫ –∑–Ω–∞–π—à–ª–∏ —Å–≤–æ—ó—Ö –∞–¥—Ä–µ—Å–∞—Ç—ñ–≤ ‚ú®
          </p>
        </div>

        <HornyIcon />
      </div>
    </div>

    <div
      class="w-full"
      :style="{
        background:
          'radial-gradient(94.39% 76.37% at 50% -34.15%, #E11C47 0%, #FFF 100%)',
      }"
    >
      <div
        class="flex flex-col mx-auto md:w-2/4 w-full h-max items-center gap-6 pb-14 container"
      >
        <h2 ref="howItWorksSection" class="text-3xl font-excali mt-5">
          –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?
        </h2>

        <GuideSteps />

        <div class="flex items-center justify-center w-full">
          <Button class="h-12 text-base" @click="handleRedirect()">
            <Icon class="size-6" name="lucide:plus" />
            –°—Ç–≤–æ—Ä–∏—Ç–∏
          </Button>
        </div>
      </div>
    </div>
  </div>
</template>
